(()=>{"use strict";var t={407:(t,e,i)=>{var o=i(966),r=document.getElementById("tetris"),n=r.getContext("2d"),s=document.getElementById("start"),h=document.getElementById("score"),a={_BG_:"rgb(1,22,39)",BLACK:"rgb(0,0,0)",VACANT:"rgb(198,222,221)",RED:"rgb(229,62,62)",GREEN:"rgb(47,133,90)",YELLOW:"rgb(246,224,94)",BLUE:"rgb(44,82,130)",PURPLE:"rgb(184,50,128)",CYAN:"rgb(163,191,250)",ORANGE:"rgb(237,137,54)"},c=function(){function t(t,e){var i=this;void 0===t&&(t=20),void 0===e&&(e=10),this.COL=10,this.ROW=20,this.GameOver=!1,this.Score=0,this.COL=e,this.ROW=t,this.BOARD=[];for(var o=0;o<this.ROW;o++){this.BOARD[o]=[];for(var r=0;r<this.COL;r++)this.BOARD[o][r]="VACANT"}window.addEventListener("resize",(function(){return i.resize()})),this.resize()}return Object.defineProperty(t.prototype,"game_over",{get:function(){return this.GameOver},set:function(t){this.GameOver=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"score",{get:function(){return this.Score},enumerable:!1,configurable:!0}),t.prototype.add_score=function(t){void 0===t&&(t=10),this.Score+=t,h.innerText=this.Score.toString()},t.drawSquare=function(e,i,o){n.fillStyle=a[o],n.fillRect(e*t.SQ,i*t.SQ,t.SQ-1.5,t.SQ-1.5),n.strokeStyle=a._BG_,n.strokeRect(e*t.SQ,i*t.SQ,t.SQ,t.SQ)},t.prototype.draw=function(){for(var e=0;e<this.ROW;e++)for(var i=0;i<this.COL;i++)t.drawSquare(i,e,this.BOARD[e][i])},t.prototype.resize=function(){window.innerHeight<window.innerWidth?(r.height=window.innerHeight,r.width=window.innerHeight/2):(r.height=window.innerWidth,r.width=window.innerWidth/2),t.SQ=r.height/this.ROW,this.draw()},t}(),d=new c;d.draw();var u=function(){function t(t,e){this.tetromino=t,this.color=e,this.x=3,this.y=-2,this.tetrominoN=0,this.isLocked=!1,this.activeTetromino=this.tetromino[this.tetrominoN]}return t.registerTetromino=function(t,e){this.Tetrominoes.push([t,e])},t.randomPiece=function(){var e=Math.floor(Math.random()*t.Tetrominoes.length);return new t(t.Tetrominoes[e][0],t.Tetrominoes[e][1])},t.prototype.fill=function(t){for(var e=0;e<this.activeTetromino.length;e++)for(var i=0;i<this.activeTetromino.length;i++)this.activeTetromino[e][i]&&c.drawSquare(this.x+i,this.y+e,t)},t.prototype.draw=function(){this.fill(this.color)},t.prototype.unDraw=function(){this.fill("VACANT")},t.prototype.shadowDown=function(){for(;!this.isLocked;)t.p.moveDown()},t.prototype.moveDown=function(){this.collision(0,1,this.activeTetromino)?(this.lock(),t.p=t.randomPiece()):(this.unDraw(),this.y++,this.draw())},t.prototype.moveRight=function(){this.collision(1,0,this.activeTetromino)||(this.unDraw(),this.x++,this.draw())},t.prototype.moveLeft=function(){this.collision(-1,0,this.activeTetromino)||(this.unDraw(),this.x--,this.draw())},t.prototype.rotate=function(){var t=this.tetromino[(this.tetrominoN+1)%this.tetromino.length],e=0;this.collision(0,0,t)&&(e=this.x>d.COL/2?-1:1),this.collision(e,0,t)||(this.unDraw(),this.x+=e,this.tetrominoN=(this.tetrominoN+1)%this.tetromino.length,this.activeTetromino=this.tetromino[this.tetrominoN],this.draw())},t.prototype.lock=function(){this.isLocked=!0;for(var t=0;t<this.activeTetromino.length;t++)for(var e=0;e<this.activeTetromino.length;e++)if(this.activeTetromino[t][e]){if(this.y+t<0){alert("Game Over"),d.game_over=!0;break}d.BOARD[this.y+t][this.x+e]=this.color}for(t=0;t<d.ROW;t++){var i=!0;for(e=0;e<d.COL;e++)i=i&&"VACANT"!==d.BOARD[t][e];if(i){for(var o=t;o>1;o--)for(e=0;e<d.COL;e++)d.BOARD[o][e]=d.BOARD[o-1][e];for(e=0;e<d.COL;e++)d.BOARD[0][e]="VACANT";d.add_score(10)}}d.draw()},t.prototype.collision=function(t,e,i){for(var o=0;o<i.length;o++)for(var r=0;r<i.length;r++)if(i[o][r]){var n=this.x+r+t,s=this.y+o+e;if(n<0||n>=d.COL||s>=d.ROW)return!0;if(!(s<0)&&"VACANT"!==d.BOARD[s][n])return!0}return!1},t.Tetrominoes=[[o.Z,"GREEN"],[o.S,"ORANGE"],[o.T,"YELLOW"],[o.O,"RED"],[o.L,"PURPLE"],[o.I,"CYAN"],[o.J,"BLACK"]],t.p=t.randomPiece(),t}();function f(t){switch(t){case 32:u.p.shadowDown();break;case 37:u.p.moveLeft(),m=Date.now();break;case 38:u.p.rotate(),m=Date.now();break;case 39:u.p.moveRight(),m=Date.now();break;case 40:u.p.moveDown()}}document.addEventListener("keydown",(function(t){return f(t.keyCode)})),document.addEventListener("swiped-up",(function(){return f(38)})),document.addEventListener("swiped-down",(function(){return f(40)})),document.addEventListener("swiped-left",(function(){return f(37)})),document.addEventListener("swiped-right",(function(){return f(39)})),document.addEventListener("long-press",(function(){return f(32)}));var m=Date.now();s.addEventListener("click",(function t(){Date.now()-m>1e3&&(u.p.moveDown(),m=Date.now()),d.game_over||requestAnimationFrame(t)}))},966:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.X=e.Z=e.T=e.S=e.O=e.L=e.J=e.I=void 0,e.I=[[[0,0,0,0],[1,1,1,1],[0,0,0,0],[0,0,0,0]],[[0,0,1,0],[0,0,1,0],[0,0,1,0],[0,0,1,0]],[[0,0,0,0],[0,0,0,0],[1,1,1,1],[0,0,0,0]],[[0,1,0,0],[0,1,0,0],[0,1,0,0],[0,1,0,0]]],e.J=[[[1,0,0],[1,1,1],[0,0,0]],[[0,1,1],[0,1,0],[0,1,0]],[[0,0,0],[1,1,1],[0,0,1]],[[0,1,0],[0,1,0],[1,1,0]]],e.L=[[[0,0,1],[1,1,1],[0,0,0]],[[0,1,0],[0,1,0],[0,1,1]],[[0,0,0],[1,1,1],[1,0,0]],[[1,1,0],[0,1,0],[0,1,0]]],e.O=[[[0,0,0,0],[0,1,1,0],[0,1,1,0],[0,0,0,0]]],e.S=[[[0,1,1],[1,1,0],[0,0,0]],[[0,1,0],[0,1,1],[0,0,1]],[[0,0,0],[0,1,1],[1,1,0]],[[1,0,0],[1,1,0],[0,1,0]]],e.T=[[[0,1,0],[1,1,1],[0,0,0]],[[0,1,0],[0,1,1],[0,1,0]],[[0,0,0],[1,1,1],[0,1,0]],[[0,1,0],[1,1,0],[0,1,0]]],e.Z=[[[1,1,0],[0,1,1],[0,0,0]],[[0,0,1],[0,1,1],[0,1,0]],[[0,0,0],[1,1,0],[0,1,1]],[[0,1,0],[1,1,0],[1,0,0]]],e.X=[[[1,0,1],[1,1,1],[0,0,0]],[[1,1,0],[0,1,0],[1,1,0]],[[0,0,0],[1,0,1],[1,1,1]],[[0,1,1],[0,1,0],[0,1,1]]]}},e={};!function i(o){if(e[o])return e[o].exports;var r=e[o]={exports:{}};return t[o](r,r.exports,i),r.exports}(407)})();